<?php

namespace Lightnote\View;

require_once 'PHPUnit/Framework.php';

require_once dirname(__FILE__) . '/../../../../../../src/htdocs/cms/library/Lightnote/View/PhpView.php';

/**
 * Test class for PhpView.
 * Generated by PHPUnit on 2010-10-03 at 09:41:35.
 */
class PhpViewTest extends \PHPUnit_Framework_TestCase
{

    /**
     * @var string
     */
    protected $path;

    /**
     * Sets up the fixture, for example, opens a network connection.
     * This method is called before a test is executed.
     */
    protected function setUp()
    {
        $this->path = \TEST_PATH . '/data/view';
        
    }

    /**
     * Tears down the fixture, for example, closes a network connection.
     * This method is called after a test is executed.
     */
    protected function tearDown()
    {

    }

    /**
     * @expectedException \Lightnote\Exception\System\FileNotFoundException
     */
    public function testNotFoundException()
    {
        $view = new PhpView('test');
    }


    /**
     * @todo Implement testAssign().
     */
    public function testAssign()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
                'This test has not been implemented yet.'
        );
    }

    
    public function testClear()
    {
        $this->view = new PhpView($this->path . '/view.phtml');
        $this->view->assign('test', 'test');
        $this->view->clear();
        
    }

    public function testFetch()
    {
        $this->view = new PhpView($this->path . '/view.phtml');
        $this->view->assign('var1', 'aaa');
        $this->assertEquals('1aaa', $this->view->fetch());

        $this->view->assign('var1', 'bbb');
        $this->assertEquals('1bbb', $this->view->fetch());
    }

    public function testMasterPlaceholder()
    {
        $this->view = new PhpView($this->path . '/view-master-placeholder.phtml');
        $this->assertEquals('master12', $this->view->fetch());
    }


    public function testMaster()
    {
        $this->view = new PhpView($this->path . '/view-master.phtml');
        $this->assertEquals('master1', $this->view->fetch());
    }

}

?>
