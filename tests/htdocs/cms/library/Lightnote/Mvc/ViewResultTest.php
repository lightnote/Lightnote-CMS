<?php

namespace Lightnote\Mvc;

require_once 'PHPUnit/Framework.php';

require_once dirname(__FILE__) . '/../../../../../../src/htdocs/cms/library/Lightnote/Mvc/ViewResult.php';

/**
 * Test class for ViewResult.
 * Generated by PHPUnit on 2010-10-02 at 07:02:19.
 */
class ViewResultTest extends \PHPUnit_Framework_TestCase
{
    /**
     * Sets up the fixture, for example, opens a network connection.
     * This method is called before a test is executed.
     */
    protected function setUp()
    {
        
    }

    /**
     * Tears down the fixture, for example, closes a network connection.
     * This method is called after a test is executed.
     */
    protected function tearDown()
    {

    }

    /**
     * @todo Implement testExecuteResult().
     */
    public function testExecuteResult()
    {
        $controller = new \Lightnote\Test\Mock\TestController();
        $httpContext = \Lightnote\Test\Factory::getHttpContext(array(
            'url' => 'backend'
        ));
        $config = new \Lightnote\Config();
        $factory = new \Lightnote\Factory($config);
        $routeHandler = new RouteHandler($httpContext);
        $route = new \Lightnote\Routing\Route('backend', $routeHandler, new \Lightnote\Routing\RouteConfig());
        $routeData = $route->getRouteData('/backend');

        $controller->viewData['var1'] = 'test';

        $context = new ControllerContext($httpContext, $routeData, $factory, $controller, \TEST_PATH.'/data/view');


        $viewResult = new ViewResult('view');
        $html = $viewResult->executeResult($context);
        $this->assertEquals('1test', $html);
    }

}

?>
